import React, { useEffect, useState, useRef } from "react";
import "./index.scss";
import io from "socket.io-client";
import Peer from "simple-peer";
import styled from "styled-components";
import Chat from "../Chat/Chat";
import Controls from "./Controls";
import axios from "axios";

const Container = styled.div`
  height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
`;

const Row = styled.div`
  display: flex;
  width: 100%;
`;

const Video = styled.video`
  width: auto;
  height: auto;
`;

const VideoCall = () => {
  const [yourName, setYourName] = useState("");
  const [yourID, setYourID] = useState("");
  const [accType, setAccType] = useState('');
  const [users, setUsers] = useState({});
  const [stream, setStream] = useState();
  const [receivingCall, setReceivingCall] = useState(false);
  const [caller, setCaller] = useState("");
  const [callerSignal, setCallerSignal] = useState();
  const [callAccepted, setCallAccepted] = useState(false);

  const userVideo = useRef();
  const partnerVideo = useRef();
  const socket = useRef();

  useEffect(() => {
    axios.get("users/me").then((res) => {
      const type = res.data.type;
      if (type === 'clinic') {
        setAccType('clinic');
      } else {
        setAccType('pet');
      }
    });

    socket.current = io.connect("/");
    navigator.mediaDevices
      .getUserMedia({ video: true, audio: true })
      .then((stream) => {
        setStream(stream);
        if (userVideo.current) {
          userVideo.current.srcObject = stream;
        }
      });

    socket.current.on("yourID", (id) => {
      setYourID(id);
    });

    socket.current.on("allUsers", (users) => {
      for (let user in users) {
        if (user === yourID) {
          setUsers({ ...yourID[yourName] });
        } else {
          setUsers(user);
        }
      }
      setUsers(users);
      console.log("users object:", users);
    });

    socket.current.on("hey", (data) => {
      setReceivingCall(true);
      setCaller(data.from);
      setCallerSignal(data.signal);
    });
  }, []);

  function callPeer(id) {
    const peer = new Peer({
      initiator: true,
      trickle: false,
      config: {
        // iceServers: [
        //   {
        //     urls: "stun:numb.viagenie.ca",
        //     username: "sultan1640@gmail.com",
        //     credential: "98376683",
        //   },
        //   {
        //     urls: "turn:numb.viagenie.ca",
        //     username: "sultan1640@gmail.com",
        //     credential: "98376683",
        //   },
        // ],
        iceServers: [
          { urls: "stun:stun.l.google.com:19302" },
          { urls: "stun:stun1.l.google.com:19302" },
          { urls: "stun:stun2.l.google.com:19302" },
          { urls: "stun:stun3.l.google.com:19302" },
          { urls: "stun:stun4.l.google.com:19302" },
        ],
      },
      stream: stream,
    });

    peer.on("signal", (data) => {
      socket.current.emit("callUser", {
        userToCall: id,
        signalData: data,
        from: yourID,
      });
    });

    peer.on("stream", (stream) => {
      if (partnerVideo.current) {
        partnerVideo.current.srcObject = stream;
      }
    });

    socket.current.on("callAccepted", (signal) => {
      setCallAccepted(true);
      peer.signal(signal);
    });
  }

  function acceptCall() {
    setCallAccepted(true);
    const peer = new Peer({
      initiator: false,
      trickle: false,
      stream: stream,
    });
    peer.on("signal", (data) => {
      socket.current.emit("acceptCall", { signal: data, to: caller });
    });

    peer.on("stream", (stream) => {
      partnerVideo.current.srcObject = stream;
    });

    peer.signal(callerSignal);
  }

  let UserVideo;
  if (stream) {
    UserVideo = (
      <Video id="user-video" playsInline muted ref={userVideo} autoPlay />
    );
  }

  let PartnerVideo;
  if (callAccepted) {
    PartnerVideo = (
      <Video id="partner-video" playsInline ref={partnerVideo} autoPlay />
    );
  }

  let incomingCall;
  if (receivingCall) {
    incomingCall = (
      <div>
        <svg
          id="incoming-call"
          onClick={acceptCall}
          height="512"
          viewBox="0 0 58 58"
          width="512"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="Page-1" fill="none" fill-rule="evenodd">
            <g
              id="004---Receiving-Call"
              fill="rgb(0,255,0)"
              fill-rule="nonzero"
              transform="translate(-1)"
            >
              <path
                id="Shape"
                d="m25.017 33.983c-5.536-5.536-6.786-11.072-7.068-13.29-.0787994-.6132828.1322481-1.2283144.571-1.664l4.48-4.478c.6590136-.6586066.7759629-1.685024.282-2.475l-7.133-11.076c-.5464837-.87475134-1.6685624-1.19045777-2.591-.729l-11.451 5.393c-.74594117.367308-1.18469338 1.15985405-1.1 1.987.6 5.7 3.085 19.712 16.855 33.483s27.78 16.255 33.483 16.855c.827146.0846934 1.619692-.3540588 1.987-1.1l5.393-11.451c.4597307-.9204474.146114-2.0395184-.725-2.587l-11.076-7.131c-.7895259-.4944789-1.8158967-.3783642-2.475.28l-4.478 4.48c-.4356856.4387519-1.0507172.6497994-1.664.571-2.218-.282-7.754-1.532-13.29-7.068z"
              />
              <path
                id="Shape"
                d="m42 23v3.943c-.0000682.382831-.2186946.732025-.5630446.8993051-.3443501.1672801-.7539821.1232845-1.0549554-.1133051l-11.382-8.943c-.2410506-.1895978-.3817735-.4793198-.3817735-.786s.1407229-.5964022.3817735-.786l11.382-8.943c.3009733-.23658957.7106053-.28058517 1.0549554-.1133051.34435.16728006.5629764.5164741.5630446.8993051v3.953c-.0000462.5472475.4397987.9928858.987 1 4.321.055 13.823.758 15.691 9.682.0781952.411611-.1084914.8283291-.4676984 1.0439873s-.8147691.1845287-1.1413016-.0779873c-1.597-1.304-4.385-2.658-9.069-2.658h-5c-.5522847 0-1 .4477153-1 1z"
              />
            </g>
          </g>
        </svg>
      </div>
    );
  }
  return (
    <div id="video-container">
      <Row>
        {UserVideo}
        {PartnerVideo}
      </Row>
      <Row>
        {Object.keys(users).map((key) => {
          if (key === yourID) {
            return null;
          }
          
          if (accType === 'pet') {
            return (
              <>
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 512 512" style={{enableBackground: 'new 0 0 512 512'}} xmlSpace="preserve">
<path style={{fill:'#EDEBED'}} d="M418.627,367.345l-87.036-25.599H180.41l-87.036,25.599c-21.087,6.203-35.567,25.555-35.567,47.535
	v72.346c0,13.682,11.092,24.774,24.774,24.774h346.839c13.682,0,24.774-11.092,24.774-24.774V414.88
	C454.194,392.9,439.713,373.547,418.627,367.345z"/>
<polygon style={{fill:'#A5CDFF'}} points="297.29,512 214.71,512 198.194,346.839 313.806,346.839 "/>
<path style={{fill:'#8CB4EB'}} d="M198.194,346.839l2.472,24.72c13.609,15.204,33.324,24.829,55.335,24.829s41.726-9.625,55.335-24.829
	l2.472-24.72H198.194z"/>
<path style={{fill:'#F7D291'}} d="M256,379.871L256,379.871c-31.926,0-57.807-25.881-57.807-57.806v-57.807h115.613v57.807
	C313.806,353.99,287.926,379.871,256,379.871z"/>
<path style={{fill:'#F0C382'}} d="M198.194,299.198c17.35,9.267,37.023,14.609,57.806,14.609s40.457-5.342,57.806-14.609v-34.94
	H198.194V299.198z"/>
<path style={{fill:'#FFE1A0'}} d="M367.484,156.903h-4.129v-82.58h-214.71v82.581h-4.129c-11.355,0-20.645,9.29-20.645,20.645
	s9.29,20.645,20.645,20.645h4.546c4.23,55.419,50.435,99.097,106.938,99.097s102.708-43.678,106.938-99.097h4.546
	c11.355,0,20.645-9.29,20.645-20.645S378.839,156.903,367.484,156.903z"/>
<g>
	<path style={{fill:'#6E5A64'}} d="M206.452,182.395c-4.565,0-8.258-3.698-8.258-8.258v-8.258c0-4.56,3.694-8.258,8.258-8.258
		s8.258,3.698,8.258,8.258v8.258C214.71,178.698,211.016,182.395,206.452,182.395z"/>
	<path style={{fill:'#6E5A64'}} d="M305.548,182.395c-4.565,0-8.258-3.698-8.258-8.258v-8.258c0-4.56,3.694-8.258,8.258-8.258
		c4.565,0,8.258,3.698,8.258,8.258v8.258C313.806,178.698,310.113,182.395,305.548,182.395z"/>
</g>
<g>
	<path style={{fill:'#A06E50'}} d="M214.71,148.645h-16.516c-4.565,0-8.258-3.698-8.258-8.258s3.694-8.258,8.258-8.258h16.516
		c4.565,0,8.258,3.698,8.258,8.258S219.274,148.645,214.71,148.645z"/>
	<path style={{fill:'#A06E50'}} d="M313.806,148.645H297.29c-4.565,0-8.258-3.698-8.258-8.258s3.694-8.258,8.258-8.258h16.516
		c4.565,0,8.258,3.698,8.258,8.258S318.371,148.645,313.806,148.645z"/>
</g>
<path style={{fill:'#F7D291'}} d="M148.645,74.323v82.581h-3.404c-9.402,0-18.184,5.958-20.62,15.04
	c-3.683,13.733,6.715,26.251,19.895,26.251h4.546c4.23,55.419,50.435,99.097,106.938,99.097c5.649,0,11.157-0.55,16.568-1.391
	c-51.454-7.942-90.891-52.286-90.891-105.964v-50.184c0-19.387,16.374-35.169,35.696-33.577c5.408,0.446,11.087,0.684,17.054,0.684
	c23.946,0,50.683-3.822,79.471-11.359c12.578-3.293,23.397-10.959,30.788-21.178L148.645,74.323L148.645,74.323z"/>
<path style={{fill:'#A06E50'}} d="M188.903,41.29l1.032,33.032c0,0-24.774,24.774-24.774,57.806v10.194
	c0,8.329-6.202,15.355-14.468,16.389l-18.565,2.321V90.839C132.129,63.474,157.935,39.914,188.903,41.29z"/>
<path style={{fill:'#DBD9DC'}} d="M354.938,387.97l-16.357-16.357l17.505-23.34c3.785-5.047,2.076-12.289-3.567-15.111l-38.712-19.356
	L256,512h49.548l52.483-104.966C361.21,400.675,359.964,392.996,354.938,387.97z"/>
<path style={{fill:'#A5CDFF'}} d="M412.903,458.323h-12.387v-12.387c0-4.565-3.694-8.258-8.258-8.258S384,441.371,384,445.935v12.387
	h-12.387c-4.565,0-8.258,3.694-8.258,8.258s3.694,8.258,8.258,8.258H384v12.387c0,4.565,3.694,8.258,8.258,8.258
	s8.258-3.694,8.258-8.258v-12.387h12.387c4.565,0,8.258-3.694,8.258-8.258S417.467,458.323,412.903,458.323z"/>
<path style={{fill:'#CD916E'}} d="M323.096,16.516l-1.032,57.806c0,0,24.774,24.774,24.774,57.806v10.194
	c0,8.329,6.202,15.355,14.468,16.389l18.565,2.321V66.065C379.871,38.7,354.065,15.14,323.096,16.516z"/>
<path style={{fill:'#E3AA75'}} d="M256,239.484c-12.395,0-23.823-3.976-30.573-10.637c-3.25-3.21-3.282-8.435-0.081-11.677
	c3.218-3.25,8.444-3.282,11.677-0.081c2.75,2.71,9.363,5.879,18.976,5.879s16.226-3.169,18.976-5.879
	c3.234-3.202,8.46-3.169,11.677,0.081c3.202,3.242,3.169,8.468-0.081,11.677C279.823,235.508,268.395,239.484,256,239.484z"/>
<path style={{fill:'#DBD9DC'}} d="M157.063,387.97l16.357-16.357l-17.505-23.34c-3.785-5.047-2.076-12.289,3.567-15.111l38.712-19.356
	L256,512h-49.548l-52.483-104.966C150.79,400.675,152.036,392.996,157.063,387.97z"/>
<path style={{fill:'#B67F5F'}} d="M272,0c-68.898,0-82.102,20.945-135.155,37.843c-3.646,1.161-5.287,5.384-3.226,8.607
	c11.512,18.008,54.361,64.946,176.096,33.073c14.255-3.732,25.217-15.226,28.107-29.676l0,0
	c3.348-16.741-6.826-33.321-22.123-40.901C303.549,2.926,287.615,0,272,0z"/>
<path style={{fill:'#A5CDFF'}} d="M173.419,512h-66.065c-4.561,0-8.258-3.697-8.258-8.258V470.71c0-4.561,3.697-8.258,8.258-8.258
	h66.065c4.561,0,8.258,3.697,8.258,8.258v33.032C181.677,508.303,177.98,512,173.419,512z"/>
<path style={{fill:'#FFFFFF'}} d="M140.387,478.968c-4.565,0-8.258-3.694-8.258-8.258v-24.774c0-4.565,3.694-8.258,8.258-8.258
	s8.258,3.694,8.258,8.258v24.774C148.645,475.274,144.952,478.968,140.387,478.968z"/>
<path style={{fill:'#8CB4EB'}} d="M173.419,495.484h-66.065c-4.561,0-8.258-3.698-8.258-8.258v16.516c0,4.56,3.697,8.258,8.258,8.258
	h66.065c4.561,0,8.258-3.698,8.258-8.258v-16.516C181.677,491.786,177.98,495.484,173.419,495.484z"/>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
              </>
            )
          } else {
            return (
              <>
                <svg id='call-patient' height="511pt" viewBox="0 -71 511.99963 511" width="511pt" xmlns="http://www.w3.org/2000/svg"><path d="m257.019531 370.304688h-55.015625c-10.382812 0-15.175781-12.910157-7.308594-19.683594 14.242188-12.261719 32.40625-19.007813 51.199219-19.007813h11.125c5.640625 0 10.214844 4.574219 10.214844 10.214844v18.265625c0 5.636719-4.574219 10.210938-10.214844 10.210938zm0 0" fill="#d0f4ef"/><path d="m227.949219 207.601562c-7.015625 2.871094-15.214844.070313-18.929688-6.738281-3.988281-7.308593-1.296875-16.46875 6.011719-20.457031l112.445312-61.351562c7.300782-3.980469 16.46875-1.292969 20.457032 6.015624 3.988281 7.308594 1.296875 16.464844-6.015625 20.453126l-112.445313 61.351562c-.5.273438-1.007812.515625-1.523437.726562zm0 0" fill="#ff9921"/><path d="m62.71875 320.101562c-3.632812 3.53125-11.457031 2.070313-19.839844-1.773437-8.484375-3.890625-17.546875-10.210937-23.453125-16.289063-11.742187-12.097656-6.546875-18.613281.769531-25.71875 7.316407-7.113281 13.984376-12.117187 25.726563-.019531.84375.871094 1.695313 1.804688 2.535156 2.789063 10.882813 12.75 21.050781 34.414062 14.261719 41.011718zm0 0" fill="#e78e6f"/><path d="m62.71875 320.101562c-3.632812 3.53125-11.457031 2.070313-19.839844-1.773437v-7.734375c0-10.757812 1.90625-21.445312 5.582032-31.5 10.878906 12.746094 21.046874 34.410156 14.257812 41.007812zm0 0" fill="#c87c5b"/><path d="m196.824219 197.273438-64.941407 27.847656-23.222656 9.957031-5.316406 2.28125c-16.695312 7.15625-30.039062 19.585937-38.433594 34.863281-6.34375 11.527344-9.851562 24.667969-9.851562 38.371094v32.867188c0 14.824218 12.019531 26.84375 26.84375 26.84375h42.289062c7.664063 0 13.878906-6.214844 13.878906-13.878907 0-1.628906-.296874-3.1875-.8125-4.636719h59.566407zm0 0" fill="#fff0cf"/><path d="m196.824219 197.273438v59.613281l-3.238281.808593c-3.929688 12.941407-15.964844 22.378907-30.171876 22.378907-17.386718 0-31.53125-14.144531-31.53125-31.53125v-23.421875zm0 0" fill="#ead1c1"/><path d="m121.59375 259.617188c0 16.421874-13.316406 29.738281-29.734375 29.738281-11.925781 0-22.203125-7.011719-26.945313-17.136719 8.390626-15.273438 21.734376-27.710938 38.429688-34.863281l5.320312-2.28125c7.8125 5.359375 12.929688 14.351562 12.929688 24.542969zm0 0" fill="#e78e6f"/><path d="m181.183594 370.304688c-8.632813 0-15.632813-7-15.632813-15.636719v-65.3125h31.269531v65.3125c0 8.636719-7 15.636719-15.636718 15.636719zm0 0" fill="#fff0cf"/><path d="m165.550781 362.28125c-4.207031 0-7.613281-3.40625-7.613281-7.613281v-51.3125c0-4.203125 3.40625-7.609375 7.613281-7.609375 4.203125 0 7.609375 3.40625 7.609375 7.609375v51.3125c0 4.207031-3.40625 7.613281-7.609375 7.613281zm0 0" fill="#ead1c1"/><path d="m138.070312 364.035156c-4.207031 0-7.613281-3.40625-7.613281-7.613281 0-3.453125-2.8125-6.265625-6.269531-6.265625h-25.65625c-7.878906 0-14.289062-6.410156-14.289062-14.289062 0-6.785157 4.875-12.683594 11.589843-14.027344 9.359375-1.871094 16.152344-10.171875 16.152344-19.738282 0-4.203124 3.40625-7.609374 7.609375-7.609374 4.207031 0 7.613281 3.40625 7.613281 7.609374 0 14.613282-9.039062 27.546876-22.21875 32.832032h19.199219c11.851562 0 21.492188 9.640625 21.492188 21.492187 0 4.203125-3.40625 7.609375-7.609376 7.609375zm0 0" fill="#ead1c1"/><path d="m223.207031 237.75-33.292969 8.3125c-9.839843 2.460938-19.808593-3.527344-22.269531-13.367188l-12.046875-48.238281 99.761719-24.917969 4.347656 17.40625c6.710938 26.871094-9.632812 54.09375-36.5 60.804688zm0 0" fill="#fff0cf"/><path d="m266.171875 152.269531c0 7.246094-5.871094 13.117188-13.113281 13.117188-7.242188 0-13.117188-5.871094-13.117188-13.117188 0-7.242187 5.875-13.113281 13.117188-13.113281 7.242187 0 13.113281 5.871094 13.113281 13.113281zm0 0" fill="#4c78a0"/><path d="m152.582031 171.332031h21.667969c4.707031 0 8.519531 3.8125 8.519531 8.519531v68.691407c0 10.6875-8.664062 19.355469-19.355469 19.355469-10.6875 0-19.351562-8.667969-19.351562-19.355469v-68.691407c0-4.707031 3.8125-8.519531 8.519531-8.519531zm0 0" fill="#e78e6f"/><path d="m205.210938 198.128906c-3.449219 0-6.601563-2.339844-7.433594-5.832031-.980469-4.085937 1.496094-8.183594 5.585937-9.160156l.089844-.023438c4.089844-.984375 8.195313 1.546875 9.171875 5.632813.980469 4.089844-1.542969 8.195312-5.632812 9.171875-.59375.144531-1.191407.210937-1.78125.210937zm0 0" fill="#4c78a0"/><path d="m53.558594 265.289062c-2.011719 0-4.023438-.792968-5.519532-2.367187-7.578124-7.980469-18.054687-5.609375-18.5-5.503906-4.0625 1.046875-8.183593-1.414063-9.230468-5.488281-1.046875-4.070313 1.4375-8.226563 5.511718-9.273438.785157-.203125 19.421876-4.78125 33.257813 9.777344 2.894531 3.050781 2.769531 7.867187-.277344 10.761718-1.472656 1.402344-3.359375 2.09375-5.242187 2.09375zm0 0" fill="#d0f4ef"/><path d="m30.292969 340.542969c-1.050781 0-2.117188-.222657-3.140625-.683594-13.886719-6.300781-24.691406-17.957031-25.144532-18.449219-2.84375-3.09375-2.640624-7.910156.453126-10.753906 3.09375-2.839844 7.902343-2.640625 10.75.449219.175781.1875 9.277343 9.921875 20.230468 14.890625 3.828125 1.734375 5.523438 6.25 3.789063 10.074218-1.273438 2.808594-4.042969 4.472657-6.9375 4.472657zm0 0" fill="#d0f4ef"/><path d="m392.148438 246.738281h-81.339844v-121.953125c0-22.464844 18.207031-40.671875 40.667968-40.671875 22.460938 0 40.671876 18.207031 40.671876 40.671875zm0 0" fill="#ffbd47"/><path d="m392.144531 124.78125v121.957031h-16.328125v-121.957031c0-11.226562-4.558594-21.394531-11.914062-28.753906-5.523438-5.519532-12.636719-9.46875-20.59375-11.101563 2.636718-.527343 5.371094-.8125 8.171875-.8125 11.234375 0 21.390625 4.558594 28.75 11.914063 7.367187 7.359375 11.914062 17.527344 11.914062 28.753906zm0 0" fill="#ff9921"/><path d="m297.125 59.402344c.542969 3.066406 1.355469 6.027344 2.410156 8.84375.355469.953125.746094 1.902344 1.152344 2.824218 9.15625 20.550782 31.414062 33.042969 54.5625 28.941407 27.261719-4.835938 45.441406-30.863281 40.609375-58.113281-.40625-2.269532-.949219-4.472657-1.636719-6.613282-.328125-1.027344-.695312-2.035156-1.078125-3.027344-1.398437-3.585937-3.210937-6.953124-5.339843-10.046874-10.800782-15.671876-30.105469-24.472657-50.0625-20.933594-26.726563 4.742187-44.726563 29.84375-40.871094 56.515625.074218.527343.160156 1.066406.253906 1.609375zm0 0" fill="#fecaa8"/><path d="m297.125 59.402344c.542969 3.066406 1.355469 6.027344 2.410156 8.84375.355469.953125.746094 1.902344 1.152344 2.824218 10.835938.421876 21.257812-.234374 31.082031-1.976562 34.609375-6.136719 54.191407-24.183594 62.453125-33.8125-.328125-1.023438-.695312-2.03125-1.078125-3.023438-1.398437-3.585937-3.210937-6.953124-5.339843-10.046874-10.800782-15.675782-30.105469-24.472657-50.0625-20.933594-26.726563 4.738281-44.726563 29.839844-40.871094 56.515625.074218.527343.160156 1.066406.253906 1.609375zm0 0" fill="#ffb38c"/><path d="m296.871094 57.789062c66.140625 4.515626 90.933594-35.570312 90.933594-35.570312-10.796876-15.675781-30.105469-24.476562-50.0625-20.9375-26.726563 4.738281-44.726563 29.839844-40.871094 56.507812zm0 0" fill="#336686"/><path d="m391.953125 29.472656c-6.882813 8.808594-32.597656 36.269532-84.976563 36.269532-2.71875 0-5.511718-.070313-8.371093-.234376-3.644531-.179687-7.421875-.503906-11.304688-.984374-4.171875-.503907-7.148437-4.300782-6.640625-8.472657.507813-4.171875 4.304688-7.144531 8.476563-6.636719 2.464843.304688 4.871093.539063 7.214843.710938 55.65625 4.171875 79.890626-24.894531 84.335938-30.984375.75-1.035156 1.714844-1.828125 2.789062-2.355469 1.5625 1.707032 3.003907 3.511719 4.324219 5.429688 1.574219 2.273437 2.964844 4.699218 4.152344 7.257812zm0 0" fill="#336686"/><path d="m371.652344 149.023438-30.554688 56.332031c-2.597656 4.792969-6.832031 8.484375-11.9375 10.414062l-18.355468 6.910157v-16.265626l12.988281-4.894531c1.675781-.628906 3.074219-1.847656 3.925781-3.417969l30.550781-56.335937c2.007813-3.695313 6.625-5.0625 10.320313-3.066406 3.695312 2.011719 5.0625 6.628906 3.0625 10.324219zm0 0" fill="#ff9921"/><path d="m345.144531 134.652344-27.867187 51.382812c-.871094 1.613282-2.292969 2.851563-4.007813 3.5l-2.464843.933594v-24.417969l20.964843-38.65625c2-3.703125 6.617188-5.074219 10.3125-3.0625 3.703125 2 5.074219 6.625 3.0625 10.320313zm0 0" fill="#ff9921"/><path d="m358.898438 124.957031c-7.324219-3.972656-16.472657-1.253906-20.441407 6.0625l-27.871093 51.390625-49.832032 18.773438c-7.640625 2.875-11.550781 11.359375-8.773437 19.03125.035156.097656.070312.191406.105469.285156 2.824218 7.828125 11.503906 11.835938 19.292968 8.902344l55.09375-20.757813c3.390625-1.277343 6.210938-3.734375 7.9375-6.917969l30.550782-56.332031c3.96875-7.316406 1.253906-16.46875-6.0625-20.4375zm0 0" fill="#ffbd47"/><path d="m255.199219 241.359375-15.769531 4.785156c-3.921876 1.191407-8.183594-.03125-10.878907-3.117187l-8.570312-9.804688c-4.984375-5.703125-2.421875-14.644531 4.824219-16.84375l20.890624-6.339844c8.648438-2.625 17.789063 2.257813 20.414063 10.910157 2.621094 8.644531-2.261719 17.785156-10.910156 20.410156zm0 0" fill="#fecaa8"/><path d="m464.605469 352.210938c0 9.992187-8.101563 18.09375-18.09375 18.09375h-95.257813c-19.621094 0-35.585937-15.964844-35.585937-35.585938v-57.109375c0-9.988281 8.101562-18.089844 18.09375-18.089844 9.988281 0 18.089843 8.101563 18.089843 18.089844v56.511719h94.660157c9.992187 0 18.09375 8.101562 18.09375 18.089844zm0 0" fill="#1e6be7"/><path d="m309.875 231.960938v7.519531h-51.472656c-19.621094 0-35.585938 15.960937-35.585938 35.582031v53.027344c0 9.992187 8.101563 18.089844 18.09375 18.089844 9.988282 0 18.089844-8.097657 18.089844-18.089844v-52.429688l117.296875-.011718c9.242187 0 16.730469-7.492188 16.730469-16.730469v-26.957031zm0 0" fill="#2081f6"/><path d="m460.898438 313.535156 46.027343 30.132813c8.6875 5.6875 5.625 19.113281-4.667969 20.472656-18.632812 2.457031-37.523437-1.851563-53.246093-12.144531l-9.308594-6.09375c-4.71875-3.089844-6.039063-9.421875-2.949219-14.140625l10.003906-15.277344c3.089844-4.71875 9.421876-6.042969 14.140626-2.949219zm0 0" fill="#abe0da"/><g fill="#f72b2b"><path d="m167.738281 141.207031c-1.644531 0-3.289062-.53125-4.660156-1.59375l-6.304687-4.882812c-3.324219-2.570313-3.929688-7.351563-1.355469-10.675781 2.570312-3.328126 7.355469-3.933594 10.675781-1.359376l1.679688 1.300782 2.105468-1.605469c3.34375-2.550781 8.117188-1.90625 10.667969 1.4375 2.550781 3.339844 1.90625 8.117187-1.4375 10.667969l-6.753906 5.152344c-1.367188 1.039062-2.992188 1.558593-4.617188 1.558593zm0 0"/><path d="m204.996094 87.652344c-1.640625 0-3.285156-.53125-4.65625-1.59375l-6.304688-4.882813c-3.324218-2.574219-3.933594-7.355469-1.359375-10.675781 2.574219-3.328125 7.355469-3.9375 10.679688-1.359375l1.679687 1.296875 2.105469-1.605469c3.339844-2.546875 8.117187-1.902343 10.667969 1.4375 2.546875 3.34375 1.90625 8.121094-1.4375 10.667969l-6.757813 5.152344c-1.363281 1.042968-2.988281 1.5625-4.617187 1.5625zm0 0"/><path d="m138.828125 123.402344c-1.640625 0-3.285156-.53125-4.65625-1.59375l-6.304687-4.882813c-3.324219-2.574219-3.933594-7.355469-1.359376-10.675781 2.574219-3.324219 7.355469-3.933594 10.679688-1.359375l1.675781 1.296875 2.105469-1.601562c3.34375-2.550782 8.121094-1.910157 10.667969 1.433593 2.550781 3.34375 1.90625 8.117188-1.433594 10.667969l-6.757813 5.152344c-1.363281 1.042968-2.988281 1.5625-4.617187 1.5625zm0 0"/></g></svg>          );
              </>
            )
          }
        })}
      </Row>
      <Row>
        {incomingCall}
        <Controls />
      </Row>
    </div>
  );
};

export default VideoCall;
